{"version":3,"file":"comlink-loader.js","sources":["../src/index.js"],"sourcesContent":["/**\n * Copyright 2018 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n * use this file except in compliance with the License. You may obtain a copy of\n * the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */\n\nimport path from 'path';\nimport loaderUtils from 'loader-utils';\n\nexport default function loader () { }\n\nloader.pitch = function (request) {\n  const options = loaderUtils.getOptions(this) || {};\n  const multi = options.multiple || options.multi || options.singleton === false;\n\n  return `\n    import {Comlink} from 'comlinkjs';\n    ${multi ? '' : 'var inst;'}\n    export default function f() {\n      ${multi ? 'var inst =' : 'inst = inst ||'} Comlink.proxy(require('!worker-loader?${JSON.stringify(options)}!${path.resolve(__dirname, 'comlink-worker-loader.js')}!${request}')());\n      return this instanceof f ? new inst : inst;\n    }\n  `.replace(/\\n\\s*/g, '')\n   .replace(/\\\\/g, '\\\\\\\\');\n};\n"],"names":["const"],"mappings":";;;;;AAmBe,SAAS,SAAU;;AAElC,MAAA,CAAO,KAAP,GAAe,UAAU,SAAS;IAChCA,IAAM,UAAU,WAAA,CAAY,UAAZ,CAAuB,KAAvB,IAAgC;IAChDA,IAAM,QAAQ,OAAA,CAAQ,QAAR,IAAoB,OAAA,CAAQ,KAA5B,IAAqC,OAAA,CAAQ,SAAR,KAAsB;IAEzE,OAAO;;;;;"}